<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" 
	integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
	 integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

	<!-- Add the datatables library CSS -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.25/datatables.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/fixedheader/3.1.9/css/fixedHeader.dataTables.min.css"/>


<!-- Add the jQuery library -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.25/datatables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/fixedheader/3.1.9/js/dataTables.fixedHeader.min.js"></script>


<!-- Add the datatables library JS -->
<script type="text/javascript" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
<!-- <link rel="stylesheet" href="../css/overview.css"> -->
<!-- Add the column filtering plugin JS -->
<script type="text/javascript" src="https://cdn.rawgit.com/rewonc/jquery.dataTables.columnFilter/v1.5.6/dist/jquery.dataTables.columnFilter.js"></script>
	<title>OVERVIEW</title>
  <style>
/* css reset */
/* CSS Reset */

/* Set default margin and padding to 0 for all elements */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Set default font family and size */
html {
  font-family: sans-serif;
  font-size: 16px;
  zoom: 80%;
}

/* Remove list styles for all lists */
ul, ol {
  list-style: none;
}

/* Remove default styling for links */
a {
  color:black;
  text-decoration: none;
}

/* Set default styles for form elements */
input, textarea, select, button {
  font-family: inherit;
  font-size: inherit;
  border: none;
  outline: none;
  background: transparent;
}

/* End CSS Reset */


/* reset ends */
    #header{
      display: flex;
      justify-content: center;
      /* background-color: #00d904; */
      width: 1800px;

    }
    body {
        height: 720px;
        width: 1280px;
        background: rgb(0, 206, 161);
    }
    #navbar{
      background-color: rgb(0, 74, 132);
      height: 60px;
      margin: 20px;
      width: 1850px;
      display: flex;
      justify-content: end;
    }
    #fixedheader{
      position: fixed;
    }
    #btnnav{
  background-color: lightgrey;
  display: flex;
  justify-content: end;
  margin-left: 20px;
  margin-right: 20px;
  margin-top:-15px;
  height: 40px;
  width: 1850px;
}
  
    /* Styling for the header */
    #parentele {
        display: flex;
        justify-content: center;
        border: 4px solid lightgrey;
        height: 760px;
        margin-left: 20px;
        margin-right: 20px;
        margin-top: 1px;
        background-color: white;
        width: 1850px;
    }
.left-nav {
  position: absolute;
  /* top: 150; */
  left: -25%;
  width: 250px;
  font-size:medium;
  /* height: 90%; */
  /* background-color: white; */
  color: black;
  box-shadow: inset 2px 2px 4px rgb(0, 74, 132);;
  padding: 40px;
  margin:50px;
  height: 450px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  overflow-y: auto;
  border: 1px solid rgb(0, 206, 161);
  border-radius: 8px;
  transition: left 0.5s ease-out;
}
#mainele {
        border: 2px solid black;
        height: 650px;
        width: 1200px;
        background-color: whitesmoke;
        /* left: 50%; */
        /* right: 0; */
        /* margin-left: 20px; */
        /* margin-right: 10px; */
        bottom: 0;
        overflow-x: scroll;
        white-space: nowrap;
    }
  
  
    .header {
        color: black;
        padding: 10px;
        box-sizing: border-box;
        text-align: center;
    }
  
    /* Styling for the left side navbar */


    .left-nav.show {
  left: 0;
}  
    /* Styling for the right side navbar */
    .right-nav {
        margin-top: 40px;
        margin-right: 120px;
        position: absolute;
        width: 220px;
        font-size:medium;
        right: 0;
        height: 480px;
        /* background-color: white; */
        color: black;
        padding: 20px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        overflow-y: auto;
        box-shadow: inset 2px 2px 4px rgb(0, 206, 161);
        border: 1px solid rgb(0, 206, 161);
        border-radius: 5%;
        line-height: 0.5;
    }
    #toggle-nav {
  position: relative;
  top: -24px;
  right: 185px;
  height:25px;
}
  
    /* Styling for the headings in side navbars */
    .left-nav h2,
    .right-nav h2 {
        margin: 0;
        padding: 1px;
        text-align: center;
    }
  
    /* Styling for the links in side navbars */
    .left-nav ul,
    .right-nav ul {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
    }
  
    .left-nav li,
    .right-nav li {
        width: 100%;
        margin: 10px 0;
    }
  
    .left-nav a,
    .right-nav a {
        color: black;
        text-decoration: none;
        width: 100%;
        display: block;
        padding: 10px;
        box-sizing: border-box;
        text-align: center;
        border-radius: 5px;
        transition: background-color 0.3s ease;
    }
  
    .left-nav a:hover,
    .right-nav a:hover {
        background-color: #555;
    }
  
  
      /* Customize column filter inputs */
      .dataTables_filter input {
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 10px;
      }
  
      .dataTables_filter input:focus {
        outline: none;
        box-shadow: 0 0 3px #ddd;
      }
  /* Style the table */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
  }
  
  /* Style the table headers */
  th {
    background-color: #f2f2f2;
    text-align: left;
    padding: 8px;
    font-size: 16px;
  }
  
  /* Style the table rows */
  tr:nth-child(even) {
    background-color: #f2f2f2;
  }
  
  tr:hover {
    background-color: #ddd;
  }
  
  /* Style the table cells */
  td {
    border: 1px solid #ddd;
    padding: 8px;
  }
  .box {
    background-color:rgb(0, 74, 132);
    color: white;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 4px;

    box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    transition: box-shadow 0.3s ease;
  }
  
  .box:hover {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
  }
  
  .box h2 {
    margin: 20px;
  }
  .box2 {
    background-color: #f4f0f0;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 10px;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    transition: box-shadow 0.3s ease;
    width:800px;
    margin-left: 450px;
  }
  th{
    background-color: rgb(0, 74, 132);
  }
  
  
 /* Add media queries for responsive design */
 /* @media only screen and (max-width: 1024px) { */
    /* Adjust the width of the main container for tablets */
    /* #parentele {
      height: auto;
      flex-wrap: wrap;
    } */
  
    /* Adjust the width of the left and right navbars for tablets */
    /* .left-nav,
    .right-nav {
      width: 35%;
    } */
  
    /* Adjust the height of the main container for tablets */
    /* #mainele {
      height: auto;
      width: 100%;
      margin: 0px 0;
    } */
    
  /* } */
  
  /* @media only screen and (min-width: 1025px) { */
    /* Adjust the width of the main container for desktops */
    /* #parentele {
      height: 580px;
    } */
  
    /* Adjust the width of the left and right navbars for desktops */
    /* .left-nav,
    .right-nav {
      width: 25%;
    } */
  
    /* Adjust the width of the main container for desktops */
    /* #mainele {
      width: 50%;
      margin: 0 0px;
    } */
  /* } */
  
  .loader {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border: 4px solid rgba(0, 0, 0, 0.1);
  border-top-color: rgb(0, 206, 161);;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
.btn {
      padding: 0.5px;
      margin: 0.5px;
      width: 30px;
      background-color: #16160b;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      width: auto;

    }

    .btn:hover {
      background-color:rgb(0, 206, 161);
    }
    .btn.active:hover {
  background-color:rgb(0, 206, 161);
}
  </style>
</head>
<body>
	<!-- Header -->
		<div id="header">
			<h3>OVERVIEW</h3>
		  </div>
  <div id="navbar">
    <nav style="margin-left: 70rem;" class="top-nav ">
      <button style="background-color:white;">
        <a href="/constituency">
         Nextview
        </a>
      </button> 
			<button>
				<a href="/homepage" title="HomePage">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-door-fill" viewBox="0 0 16 16">
						<path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5Z"/>
					  </svg>
					</a>
			</button>
      <button title="Logout">
        <a href="/logout">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
            <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
          </svg>
        </a>
      </button>
	</nav>
  </div>
  <div id="btnnav">
    <div>
      <button class="btn btn-warning" name='TDPFull' id="TDPFull" >TDPFull</button>
      <button class="btn btn-warning" name='JSPFull' id="JSPFull">JSPFull</button>
      <button class="btn btn-warning" name='TDPJSPAlliance' id="TDPJSPAlliance-btn">TDP+JSP Alliance</button> <!-- for '/TDPJSPAlliance' route -->
      </div>
  </div>
	<div id="parentele">
    <button id="toggle-nav">&#9776;</button>
		<div>
		  <nav class="left-nav">
			<!-- <div class="box">
				<h2>Overview</h2>
			  </div> -->
			<header class="">
			  <h4>Selection</h4>
			</header>
			<!-- <form id="form" method="get" action="/DPC_Data"> -->
			  <ul>
				<!-- <span>See By</span> -->
				<li><input type="radio" name="selectedOption" value="District">DISTRICTS</li>
				<li><input type="radio" name="selectedOption" value="PARLIAMENT">PARLIAMENT</li>
				<li><input type="radio" name="selectedOption" value="RCaste">CASTE</li>
			  </ul>
			  <button id="submit" name="DPC" class="btn btn-dark"  style="margin-top: 60px;">Submit</button> <!-- for '/DPC' route -->

			<!-- </form> -->
		  </nav>
      <nav class="right-nav" id="nav-right" style="display:none;">
        <div class="">
          <h3>Filters</h3>
          </div>
          <section style="margin:5px;">
            <label  style="display: block; margin-bottom: 5px;">District</label>
            <select  id="district" style="padding: 5px; margin-bottom: 5px;">
            </select>
          </section>
          <section style="margin: 5px;">
            <label  style="display: block; margin-bottom: 5px;">Parliament</label>
            <select  id="parliament" style="padding: 5px; margin-bottom: 5px;">
              <option value="selectparliament">Select Parliament</option>
            </select>
          </section>
          
        <section style="margin: 5px;">
          <label style="display: block; margin-bottom: 5px;">Caste</label>
          <select  id="Caste" style="padding: 5px; margin-bottom: 5px; " >
            <option  value="">Select Caste</option>
          </select>
        </section>
        <section style="margin: 5px;">
          <label for="weekDropdown" style="display: block; margin-bottom: 5px;">AGE</label>
          <select id="age" style="padding: 5px; margin-bottom: 5px;">
            <option value="">Select Age</option>
            <option value="18-30">18-30</option>
            <option value="30-45">30-45</option>
            <option value="45-60">45-60</option>
            <option value="60+">60+</option>
          </select>
        </section>
        <section style="margin: 5px;">
          <label for="Gender" style="display: block; margin-bottom: 5px;">Gender</label>
          <select name="Gender" id="Gender" style="padding: 5px; margin-bottom: 5px;">
            <option value="">Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
          </select>
        </section>
        <button id="left-nav-btn" class="btn btn-primary" style="padding: 5px; margin: 5px;">Submit</button>
        <button id="left-nav-btn2" class="btn btn-danger" style="padding: 5px; margin: 5px; background-color: #00d904; display:none">Submit</button>
        <button id="tdpBtn" class="btn btn-danger" style="padding: 5px; margin: 5px; background-color: red; display:none">Submit</button>
        <button id="jspBtn" class="btn btn-danger" style="padding: 5px; margin: 5px; background-color:yellow; display:none">Submit</button>
      </nav>
		</div>
		<div id="mainele"></div>	
</div>
</body>
<script>
const nav = document.querySelector('.left-nav');
const toggleBtn = document.querySelector('#toggle-nav');

toggleBtn.addEventListener('click', () => {
  nav.classList.toggle('show');
});


// get all buttons and add click event listener to each one
const buttons = document.querySelectorAll('.btn');
buttons.forEach(button => {
  button.addEventListener('click', function() {
    // remove 'active' class from all buttons
    buttons.forEach(b => b.classList.remove('active'));
    // add 'active' class to clicked button
    this.classList.add('active');
  });
});

  const submitbtn = document.querySelector('#submit')
  submitbtn.addEventListener('click',getData)
  const filterbtn = document.querySelector('#left-nav-btn')  //for data filter----
  filterbtn.addEventListener('click',getFilteredData)
  const getParliament = document.querySelector('#parliament')
  const districtDropdown = document.querySelector('#district')
  const getCaste = document.querySelector('#Caste')
  axios.get('/districts')
  .then(response => {
    const districts = response.data;
    // Populate district dropdown
    districtDropdown.innerHTML = '<option value="">Select a district</option>';
    districts.forEach(district => {
      const option = document.createElement('option');
      option.value = district;
      option.textContent = district;
      districtDropdown.appendChild(option);
    });
  })
  .catch(error => {
    console.log(error);
  });
//getting parliament value based on district-----
districtDropdown.addEventListener('change',async function(){
  const getDistrict = this.value
  getDistrict.innerHTML = '<option value="">Select a district</option>';
  let parliament2 = [];
  // console.log('PARLIAM VAL',valparliament)
  let res = await axios.get('/parliament',{params:{District:getDistrict}})
  // .then((res)=>{
    getParliament.innerHTML = ''
    getParliament.innerHTML = '<option value="">Select Parliament</option>'
    let parliament = res.data
    parliament.forEach(val =>{
    const option = document.createElement('option');
    option.value = val;
    option.textContent = val;
    getParliament.appendChild(option)
  })
  await axios.get('/dist_caste',{params:{District:getDistrict}}).then((res)=>{
    const caste = res.data
    // console.log(caste,'casteData')
    getCaste.innerHTML = ''
    getCaste.innerHTML =  '<option value="">Select Caste</option>'
    caste.forEach(val =>{
    const option = document.createElement('option');
    option.value = val;
    option.textContent = val;
    getCaste.appendChild(option)
    })
  })
})
//getting caste values based on 
getParliament.addEventListener('change',async function(){
  const parliament = getParliament.value
  const getDistrict = districtDropdown.value
  // console.log(`parliament is ${parliament}`)
  axios.get('/caste',{params:{District:getDistrict,parliament:parliament}}).then((res)=>{
    const caste = res.data
    getCaste.innerHTML = ''
    getCaste.innerHTML =  '<option value="">Select Caste</option>'


    caste.forEach(val =>{
    const option = document.createElement('option');
    option.value = val;
    option.textContent = val;
    getCaste.appendChild(option)
    })
  })
})
async function  getData(e){
  const selectedOption = document.querySelector('input[name="selectedOption"]:checked')?.value;
  if (!selectedOption) {
    alert("Please select an option.");
    return;
  }
  document.getElementById("nav-right").style.display = 'block';
  e.preventDefault()
// Add a loader to the page
const loader = document.createElement("div");
  loader.classList.add("loader");
  loader.style.position = "fixed";
  loader.style.top = "35%";
  loader.style.left = "42%";
  loader.style.transform = "translate(-50%, -50%)";
  loader.style.border = "25px solid rgba(0, 0, 0, 0.1)";
  loader.style.borderTopColor = "#3498db";
  loader.style.borderRadius = "75%";
  loader.style.width = "250px";
  loader.style.height = "250px";
  loader.style.animation = "spin 1s ease-in-out infinite";

  document.body.appendChild(loader);
    // const selectedOption = document.querySelector('input[name="selectedOption"]:checked').value;
    const response1 =  await  axios.post('/DPC_Data', {selectedOption:selectedOption});
  let data = response1.data
  try {
  const mainele = document.getElementById("mainele");
  mainele.innerHTML = ''
    mainele.innerHTML = `
      <table id="datatable">
        <thead>
          <tr class="header-row">
            ${Object.keys(data[0]).map((key, index) => `
            <th ">
              ${key}
              ${index === 0 ? `
            ` : ''}
            </th>`).join("")}
          </tr>
        </thead>
        <tbody>
          ${data.map(row => `
            <tr>
              ${Object.values(row).map(value => `<td>${value}</td>`).join("")}
            </tr>
          `).join("")}
        </tbody>
      </table>
    `;
    // Initialize DataTable plugin with pagination and column filtering options
    $(document).ready(function() {
      const table = $('#datatable').DataTable({
        "paging": false,
        scrollY: '400px',
        scrollCollapse: true,
        "ordering": false,
        "searching": true,
        "columnDefs": [
          { "targets": '_all', "searchable": true },
          { "targets": '_all', "sortable": false }
        ],
        // "fixedHeader": true,
        // "headerOffset": $(".header-row").height()
      });
      $('.search-input').on('keyup', function () {
        const columnIdx = $(this).parent().index();
        const searchValue = $(this).val();
        table.column(columnIdx).search(searchValue).draw();
      });
      $('.filter-dropdown').on('change', function () {
        const columnIdx = $(this).parent().index();
        const filterValue = $(this).val();
        table.column(columnIdx).search(filterValue).draw();
      });
    });

} catch (error) {
  console.error(error);
}
finally {
  // Remove the loader from the page
  document.body.removeChild(loader);
}
}

async function getFilteredData(e){
  e.preventDefault()
  // Add a loader to the page
  const loader = document.createElement("div");
  loader.classList.add("loader");
  loader.style.position = "fixed";
  loader.style.top = "35%";
  loader.style.left = "42%";
  loader.style.transform = "translate(-50%, -50%)";
  loader.style.border = "25px solid rgba(0, 0, 0, 0.1)";
  loader.style.borderTopColor = "#3498db";
  loader.style.borderRadius = "75%";
  loader.style.width = "250px";
  loader.style.height = "250px";
  loader.style.animation = "spin 1s ease-in-out infinite";


  document.body.appendChild(loader);
  const District = document.querySelector('#district').value
  const PARLIAMENT = document.querySelector('#parliament').value
  const Caste = document.querySelector('#Caste').value
  const Gender = document.querySelector('#Gender').value
  const age =document.querySelector('#age').value
  const selectedOption = document.querySelector('input[name="selectedOption"]:checked').value;  
  console.log(Caste)

  
  const response1 = await  axios.post('/DPC_Data', {selectedOption:selectedOption,Gender:Gender,Caste:Caste,age:age,
    District:District,PARLIAMENT:PARLIAMENT});
  let data = response1.data
  // console.log(data)
  try {
    const mainele = document.getElementById("mainele");
  mainele.innerHTML = ''
    mainele.innerHTML = `
      <table id="datatable">
        <thead>
          <tr class="header-row">
            ${Object.keys(data[0]).map((key, index) => `
            <th id=fixedheader>
              ${key}
              ${index === 0 ? `
            ` : ''}
            </th>`).join("")}
          </tr>
        </thead>
        <tbody>
          ${data.map(row => `
            <tr>
              ${Object.values(row).map(value => `<td>${value}</td>`).join("")}
            </tr>
          `).join("")}
        </tbody>
      </table>
    `;
    // Initialize DataTable plugin with pagination and column filtering options
    $(document).ready(function() {
      const table = $('#datatable').DataTable({
        "paging": false,
        scrollY: '800px',
        scrollCollapse: true,
        "ordering": false,
        "searching": true,
        "columnDefs": [
          { "targets": '_all', "searchable": true },
          { "targets": '_all', "sortable": false }
        ],
        // "fixedHeader": true,
        // "headerOffset": $(".header-row").height()
      });
      $('.search-input').on('keyup', function () {
        const columnIdx = $(this).parent().index();
        const searchValue = $(this).val();
        table.column(columnIdx).search(searchValue).draw();
      });
      $('.filter-dropdown').on('change', function () {
        const columnIdx = $(this).parent().index();
        const filterValue = $(this).val();
        table.column(columnIdx).search(filterValue).draw();
      });
    });
  }catch(error){
    console.error(error);
  }
  finally {
    // Remove the loader from the page
    document.body.removeChild(loader);
  }
 
}


const TDPJSPAlliancebtn = document.querySelector('#TDPJSPAlliance-btn')
TDPJSPAlliancebtn .addEventListener('click',TDPJSPAlliance)
async function  TDPJSPAlliance(e){
  const selectedOption = document.querySelector('input[name="selectedOption"]:checked')?.value;
  if (!selectedOption) {
    alert("Please select an option.");
    return;
  }
    document.getElementById('left-nav-btn').style.display = 'none'
    document.getElementById('left-nav-btn2').style.display = 'block'
    document.getElementById('jspBtn').style.display = 'none'
    document.getElementById('tdpBtn').style.display = 'none'

  e.preventDefault()
// Add a loader to the page
const loader = document.createElement("div");
  loader.classList.add("loader");
  loader.style.position = "fixed";
  loader.style.top = "35%";
  loader.style.left = "42%";
  loader.style.transform = "translate(-50%, -50%)";
  loader.style.border = "25px solid rgba(0, 0, 0, 0.1)";
  loader.style.borderTopColor = "#3498db";
  loader.style.borderRadius = "75%";
  loader.style.width = "250px";
  loader.style.height = "250px";
  loader.style.animation = "spin 1s ease-in-out infinite";

  document.body.appendChild(loader);

  
    // const selectedOption = document.querySelector('input[name="selectedOption"]:checked').value;
    const response1 =  await  axios.post('/TDPJSPAlliance', {selectedOption:selectedOption});

  let data = response1.data
  
  try {
    const mainele = document.getElementById("mainele");
    mainele.innerHTML = `
        <table id="datatable">
          <thead>
            <tr class="header-row">
              <th></th>
              <th colspan="3">OVERALL</th>
              <th colspan="3">TDP</th>
              <th colspan="3">JSP</th>
            </tr>
            <tr class="header-row">
              ${Object.keys(data[0]).map((key, index) => `
                <th>
                  ${key}
                  ${index === 0 ? `
                ` : ''}
                </th>`).join("")}
            </tr>
          </thead>
          <tbody>
            ${data.map(row => `
              <tr>
                ${Object.values(row).map(value => `<td>${value}</td>`).join("")}
              </tr>
            `).join("")}
          </tbody>
        </table>
      `;
      // Initialize DataTable plugin with pagination and column filtering options
      $(document).ready(function() {
        const table = $('#datatable').DataTable({
          "paging": false,
          scrollY: '800px',
          scrollX: true,
          scrollCollapse: true,
          "ordering": false,
          "searching": true,
          "columnDefs": [
            { "targets": '_all', "searchable": true },
            { "targets": '_all', "sortable": false }
          ],
          // "fixedHeader": true,
          // "headerOffset": $(".header-row").height()
        });
        $('.search-input').on('keyup', function () {
          const columnIdx = $(this).parent().index();
          const searchValue = $(this).val();
          table.column(columnIdx).search(searchValue).draw();
        });
        $('.filter-dropdown').on('change', function () {
          const columnIdx = $(this).parent().index();
          const filterValue = $(this).val();
          table.column(columnIdx).search(filterValue).draw();
        });
      });  
    
  } catch (error) {
    console.error(error);
  }
  finally {
    // Remove the loader from the page
    document.body.removeChild(loader);
  }
}


//filter data fir TDPJSPALLIANCE
document.getElementById('left-nav-btn2').addEventListener('click',getFilteredData2)

async function getFilteredData2(e){
    console.log('btn is clicked....')
  e.preventDefault()
  // Add a loader to the page
  const loader = document.createElement("div");
  loader.classList.add("loader");
  loader.style.position = "fixed";
  loader.style.top = "35%";
  loader.style.left = "42%";
  loader.style.transform = "translate(-50%, -50%)";
  loader.style.border = "25px solid rgba(0, 0, 0, 0.1)";
  loader.style.borderTopColor = "#3498db";
  loader.style.borderRadius = "75%";
  loader.style.width = "250px";
  loader.style.height = "250px";
  loader.style.animation = "spin 1s ease-in-out infinite";


  document.body.appendChild(loader);
  const District = document.querySelector('#district').value
  const PARLIAMENT = document.querySelector('#parliament').value
  const Caste = document.querySelector('#Caste').value
  const Gender = document.querySelector('#Gender').value
  const age =document.querySelector('#age').value
  const selectedOption = document.querySelector('input[name="selectedOption"]:checked').value;  
  console.log(Caste)

  
  const response1 = await  axios.post('/TDPJSPAlliance', {selectedOption:selectedOption,Gender:Gender,Caste:Caste,age:age,
    District:District,PARLIAMENT:PARLIAMENT});
  let data = response1.data
  // console.log(data)
  try {
    const mainele = document.getElementById("mainele");
  mainele.innerHTML = `
      <table id="datatable">
        <thead>
          <tr class="header-row">
            <th></th>
            <th colspan="3">OVERALL</th>
            <th colspan="3">TDP</th>
            <th colspan="3">JSP</th>
          </tr>
          <tr class="header-row">
            ${Object.keys(data[0]).map((key, index) => `
              <th>
                ${key}
                ${index === 0 ? `
              ` : ''}
              </th>`).join("")}
          </tr>
        </thead>
        <tbody>
          ${data.map(row => `
            <tr>
              ${Object.values(row).map(value => `<td>${value}</td>`).join("")}
            </tr>
          `).join("")}
        </tbody>
      </table>
    `;
    // Initialize DataTable plugin with pagination and column filtering options
    $(document).ready(function() {
      const table = $('#datatable').DataTable({
        "paging": false,
        scrollY: '800px',
        scrollX: true,
        scrollCollapse: true,
        "ordering": false,
        "searching": true,
        "columnDefs": [
          { "targets": '_all', "searchable": true },
          { "targets": '_all', "sortable": false }
        ],
        // "fixedHeader": true,
        // "headerOffset": $(".header-row").height()
      });
      $('.search-input').on('keyup', function () {
        const columnIdx = $(this).parent().index();
        const searchValue = $(this).val();
        table.column(columnIdx).search(searchValue).draw();
      });
      $('.filter-dropdown').on('change', function () {
        const columnIdx = $(this).parent().index();
        const filterValue = $(this).val();
        table.column(columnIdx).search(filterValue).draw();
      });
    });  
  }catch(error){
    console.error(error);
  }
  finally {
    // Remove the loader from the page
    document.body.removeChild(loader);
  }
}
//tdp fullData---
document.getElementById('TDPFull').addEventListener('click',TDPFull)
async function TDPFull(e){ 
  const selectedOption = document.querySelector('input[name="selectedOption"]:checked')?.value;
  if (!selectedOption) {
    alert("Please select an option.");
    return;
  }
    document.getElementById('left-nav-btn').style.display = 'none'
    document.getElementById('left-nav-btn2').style.display = 'none'
    document.getElementById('jspBtn').style.display = 'none'
    document.getElementById('tdpBtn').style.display = 'block'
    e.preventDefault()
  const loader = document.createElement("div");
  loader.classList.add("loader");
  loader.style.position = "fixed";
  loader.style.top = "35%";
  loader.style.left = "42%";
  loader.style.transform = "translate(-50%, -50%)";
  loader.style.border = "25px solid rgba(0, 0, 0, 0.1)";
  loader.style.borderTopColor = "#3498db";
  loader.style.borderRadius = "75%";
  loader.style.width = "250px";
  loader.style.height = "250px";
  loader.style.animation = "spin 1s ease-in-out infinite";

  document.body.appendChild(loader);

  
    // const selectedOption = document.querySelector('input[name="selectedOption"]:checked').value;
    const response1 =  await  axios.post('/tdpfull', {selectedOption:selectedOption});

  let data = response1.data
  
  try {
    const mainele = document.getElementById("mainele");
  mainele.innerHTML = ''
    mainele.innerHTML = `
      <table id="datatable">
        <thead>
          <tr class="header-row">
            ${Object.keys(data[0]).map((key, index) => `
            <th>
              ${key}
              ${index === 0 ? `
            ` : ''}
            </th>`).join("")}
          </tr>
        </thead>
        <tbody>
          ${data.map(row => `
            <tr>
              ${Object.values(row).map(value => `<td>${value}</td>`).join("")}
            </tr>
          `).join("")}
        </tbody>
      </table>
    `;
    // Initialize DataTable plugin with pagination and column filtering options
    $(document).ready(function() {
        const table = $('#datatable').DataTable({
          "paging": false,
          scrollY: '800px',
          // scrollX: true,
          // scrollCollapse: true,
          "ordering": false,
          "searching": true,
          "columnDefs": [
            { "targets": '_all', "searchable": true },
            { "targets": '_all', "sortable": false }
          ],
          // "fixedHeader": true,
          // "headerOffset": $(".header-row").height()
        });
        $('.search-input').on('keyup', function () {
          const columnIdx = $(this).parent().index();
          const searchValue = $(this).val();
          table.column(columnIdx).search(searchValue).draw();
        });
        $('.filter-dropdown').on('change', function () {
          const columnIdx = $(this).parent().index();
          const filterValue = $(this).val();
          table.column(columnIdx).search(filterValue).draw();
        });
      });  
    
  } catch (error) {
    console.error(error);
  }
  finally {
    // Remove the loader from the page
    document.body.removeChild(loader);
  }


}
//filtering tdpfull----
const tdpBtn = document.getElementById('tdpBtn')
tdpBtn.addEventListener('click',getFilterTDP)
async function getFilterTDP(e){
    console.log('btn clicked...')
    e.preventDefault()
    // Add a loader to the page
    const loader = document.createElement("div");
    loader.classList.add("loader");
    loader.style.position = "fixed";
    loader.style.top = "35%";
    loader.style.left = "42%";
    loader.style.transform = "translate(-50%, -50%)";
    loader.style.border = "25px solid rgba(0, 0, 0, 0.1)";
    loader.style.borderTopColor = "#3498db";
    loader.style.borderRadius = "75%";
    loader.style.width = "250px";
    loader.style.height = "250px";
    loader.style.animation = "spin 1s ease-in-out infinite";
  
  
    document.body.appendChild(loader);
    const District = document.querySelector('#district').value
    const PARLIAMENT = document.querySelector('#parliament').value
    const Caste = document.querySelector('#Caste').value
    const Gender = document.querySelector('#Gender').value
    const age =document.querySelector('#age').value
    const selectedOption = document.querySelector('input[name="selectedOption"]:checked').value;  
    console.log(Caste)
  
    
    const response1 = await  axios.post('/tdpfull', {selectedOption:selectedOption,Gender:Gender,Caste:Caste,age:age,
      District:District,PARLIAMENT:PARLIAMENT});
    let data = response1.data
    // console.log(data)
    try {
      const mainele = document.getElementById("mainele");
    mainele.innerHTML = ''
      mainele.innerHTML = `
        <table id="datatable">
          <thead>
            <tr class="header-row">
              ${Object.keys(data[0]).map((key, index) => `
              <th>
                ${key}
                ${index === 0 ? `
              ` : ''}
              </th>`).join("")}
            </tr>
          </thead>
          <tbody>
            ${data.map(row => `
              <tr>
                ${Object.values(row).map(value => `<td>${value}</td>`).join("")}
              </tr>
            `).join("")}
          </tbody>
        </table>
      `;
      $(document).ready(function() {
        const table = $('#datatable').DataTable({
          "paging": false,
          scrollY: '800px',
          // scrollX: true,
          // scrollCollapse: true,
          "ordering": false,
          "searching": true,
          "columnDefs": [
            { "targets": '_all', "searchable": true },
            { "targets": '_all', "sortable": false }
          ],
          // "fixedHeader": true,
          // "headerOffset": $(".header-row").height()
        });
        $('.search-input').on('keyup', function () {
          const columnIdx = $(this).parent().index();
          const searchValue = $(this).val();
          table.column(columnIdx).search(searchValue).draw();
        });
        $('.filter-dropdown').on('change', function () {
          const columnIdx = $(this).parent().index();
          const filterValue = $(this).val();
          table.column(columnIdx).search(filterValue).draw();
        });
      });  
    }catch(error){
      console.error(error);
    }
    finally {
      // Remove the loader from the page
      document.body.removeChild(loader);
    }
  }





//jsp full data---
document.getElementById('JSPFull').addEventListener('click',JSPFull)
async function JSPFull(e){ 
  const selectedOption = document.querySelector('input[name="selectedOption"]:checked')?.value;
  if (!selectedOption) {
    alert("Please select an option.");
    return;
  }
    document.getElementById('left-nav-btn').style.display = 'none'
    document.getElementById('left-nav-btn2').style.display = 'none'
    document.getElementById('jspBtn').style.display = 'block'
    document.getElementById('tdpBtn').style.display = 'none'
    e.preventDefault()
  const loader = document.createElement("div");
  loader.classList.add("loader");
  loader.style.position = "fixed";
  loader.style.top = "35%";
  loader.style.left = "42%";
  loader.style.transform = "translate(-50%, -50%)";
  loader.style.border = "25px solid rgba(0, 0, 0, 0.1)";
  loader.style.borderTopColor = "#3498db";
  loader.style.borderRadius = "75%";
  loader.style.width = "250px";
  loader.style.height = "250px";
  loader.style.animation = "spin 1s ease-in-out infinite";

  document.body.appendChild(loader);

  
    // const selectedOption = document.querySelector('input[name="selectedOption"]:checked').value;
    const response1 =  await  axios.post('/jspfull', {selectedOption:selectedOption});

  let data = response1.data
  
  try {
    const mainele = document.getElementById("mainele");
  mainele.innerHTML = ''
    mainele.innerHTML = `
      <table id="datatable">
        <thead>
          <tr class="header-row">
            ${Object.keys(data[0]).map((key, index) => `
            <th>
              ${key}
              ${index === 0 ? `
            ` : ''}
            </th>`).join("")}
          </tr>
        </thead>
        <tbody>
          ${data.map(row => `
            <tr>
              ${Object.values(row).map(value => `<td>${value}</td>`).join("")}
            </tr>
          `).join("")}
        </tbody>
      </table>
    `;
    // Initialize DataTable plugin with pagination and column filtering options
    $(document).ready(function() {
        const table = $('#datatable').DataTable({
          "paging": false,
          scrollY: '800px',
          // scrollX: true,
          // scrollCollapse: true,
          "ordering": false,
          "searching": true,
          "columnDefs": [
            { "targets": '_all', "searchable": true },
            { "targets": '_all', "sortable": false }
          ],
          // "fixedHeader": true,
          // "headerOffset": $(".header-row").height()
        });
        $('.search-input').on('keyup', function () {
          const columnIdx = $(this).parent().index();
          const searchValue = $(this).val();
          table.column(columnIdx).search(searchValue).draw();
        });
        $('.filter-dropdown').on('change', function () {
          const columnIdx = $(this).parent().index();
          const filterValue = $(this).val();
          table.column(columnIdx).search(filterValue).draw();
        });
      });  
  } catch (error) {
    console.error(error);
  }
  finally {
    // Remove the loader from the page
    document.body.removeChild(loader);
  }


}
//filtering jspFull--
const jspBtn = document.getElementById('jspBtn')
console.log(jspBtn)
jspBtn.addEventListener('click',getFilterJSP)
async function getFilterJSP(e){
    console.log('btn clicked...')
    e.preventDefault()
    // Add a loader to the page
    const loader = document.createElement("div");
    loader.classList.add("loader");
    loader.style.position = "fixed";
    loader.style.top = "35%";
    loader.style.left = "42%";
    loader.style.transform = "translate(-50%, -50%)";
    loader.style.border = "25px solid rgba(0, 0, 0, 0.1)";
    loader.style.borderTopColor = "#3498db";
    loader.style.borderRadius = "75%";
    loader.style.width = "250px";
    loader.style.height = "250px";
    loader.style.animation = "spin 1s ease-in-out infinite";
  
  
    document.body.appendChild(loader);
    const District = document.querySelector('#district').value
    const PARLIAMENT = document.querySelector('#parliament').value
    const Caste = document.querySelector('#Caste').value
    const Gender = document.querySelector('#Gender').value
    const age =document.querySelector('#age').value
    const selectedOption = document.querySelector('input[name="selectedOption"]:checked').value;  
    console.log(Caste)
  
    
    const response1 = await  axios.post('/jspfull', {selectedOption:selectedOption,Gender:Gender,Caste:Caste,age:age,
      District:District,PARLIAMENT:PARLIAMENT});
    let data = response1.data
    // console.log(data)
    try {
      const mainele = document.getElementById("mainele");
    mainele.innerHTML = ''
      mainele.innerHTML = `
        <table id="datatable">
          <thead>
            <tr class="header-row">
              ${Object.keys(data[0]).map((key, index) => `
              <th >
                ${key}
                ${index === 0 ? `
              ` : ''}
              </th>`).join("")}
            </tr>
          </thead>
          <tbody>
            ${data.map(row => `
              <tr>
                ${Object.values(row).map(value => `<td>${value}</td>`).join("")}
              </tr>
            `).join("")}
          </tbody>
        </table>
      `;
      // Initialize DataTable plugin with pagination and column filtering options
      $(document).ready(function() {
        const table = $('#datatable').DataTable({
          "paging": false,
          scrollY: '800px',
          // scrollX: true,
          // scrollCollapse: true,
          "ordering": false,
          "searching": true,
          "columnDefs": [
            { "targets": '_all', "searchable": true },
            { "targets": '_all', "sortable": false }
          ],
          // "fixedHeader": true,
          // "headerOffset": $(".header-row").height()
        });
        $('.search-input').on('keyup', function () {
          const columnIdx = $(this).parent().index();
          const searchValue = $(this).val();
          table.column(columnIdx).search(searchValue).draw();
        });
        $('.filter-dropdown').on('change', function () {
          const columnIdx = $(this).parent().index();
          const filterValue = $(this).val();
          table.column(columnIdx).search(filterValue).draw();
        });
      });  
    }catch(error){
      console.error(error);
    }
    finally {
      // Remove the loader from the page
      document.body.removeChild(loader);
    }
  }









</script>
</html>